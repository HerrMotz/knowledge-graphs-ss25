# Week 5 — Ontology Alignment

## Calculate embeddings using OWL2Vec*

> [!NOTE]
> This corresponds to the task `Vector.1`.

```shell
python owl2vec.py ../week1/ontology.xml ../week2/pizza_data.ttl --outdir . --sample 500
```

## Pairwise comparison of embeddings
```shell
python pairwise_similarity_tool.py pairs --vec cfg2.vec.txt --pairs pairs.txt --output similarities.txt
```

## Pairwise similarity plot of $k$ random vectors
```shell
python pairwise_similarity_tool.py random --vec cfg2.vec.txt -k 20
```

## File structure overview

The output files will be located in the directory `/week5/`.

| File                                                                        | Description                                                                                                                |
|-----------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| [owl2vec.py](/week5/owl2vec.py)                                             | Entry-point or wrapper script for calling OWL2Vec* directly (optional/manual use).                                         |
| [cfg1.ini](/week5/cfg1.ini) (generated)                                     | OWL2Vec* configuration file (first version).                                                                               |
| [cfg1.vec.bin](/week5/cfg1_2000.vec.bin) (generated)                        | Binary vector file generated by OWL2Vec* using `cfg1.ini`.                                                                 |
| [cfg1.vec.txt](/week5/cfg1_2000.vec.txt) (generated)                        | Human-readable vector file (text format) from the first OWL2Vec* run.                                                      |
| [cfg1_cache](/week5/cfg1_cache) (generated)                                 | Cache directory generated during the first OWL2Vec* run.                                                                   |
| [cfg2.ini](/week5/cfg2.ini) (generated)                                     | OWL2Vec* configuration file (second run).                                                                                  |
| [cfg2.vec.bin](/week5/cfg2_2000.vec.bin) (generated)                        | Binary vector file generated by OWL2Vec* using `cfg2.ini`.                                                                 |
| [cfg2.vec.hdr](/week5/cfg2.vec.hdr) (generated)                             | Header file for `cfg2.vec.txt` (reconstructed, as OWL2Vec* omits it).                                                      |
| [cfg2.vec.txt](/week5/cfg2_2000.vec.txt) (generated)                        | Human-readable vector file (text format) from the second OWL2Vec* run.                                                     |
| [cfg2_cache](/week5/cfg2_cache) (generated)                                 | Cache directory generated during the second OWL2Vec* run.                                                                  |
| [merged.owl](/week5/merged.owl) (generated)                                 | The ontology merged with tabular data (output of the first step of the pipeline).                                          |
| [cfg1.similarity_report.txt](/week5/cfg1.similarity_report.txt) (generated) | Similarity report for configuration 1 (same for second configuration) for selected pairs of similar and dissimilar vectors |
| similarities1.txt (generated)                                               | The embeddings with a sample size of 10000 for configuration 1.                                                            |
| similarities2.txt (generated)                                               | The embeddings with a sample size of 10000 for configuration 2.                                                            |
| similarities1_2000.txt (generated)                                          | The embeddings with a sample size of 2000 for configuration 1.                                                             |
| similarities2_2000.txt (generated)                                          | The embeddings with a sample size of 2000 for configuration 2.                                                             |

---

# Actual Task: Embeddings

This task consists in creating embeddings capturing the rich semantics of the created ontology and generated data. We will use the tool OWL2Vec*. These embeddings can be used in a subsequent Machine Learning model that requires as input the encoding of the ontology entities. In this coursework we are computing clusters of the ontology entities.

(*) Subtask Vector.1 Run OWL2Vec* with the created ontology and generated data. Test two different configurations. Save the generated vectors in both binary and textual format (40%). Tip: It is easier if given to OWL2Vec* a single file. To do so just load both files (ontology and the generated data) into a single RDFlib Graph or Jena RDF model and save it into OWL format. Owlready seems to cope with Turtle format, but use OWL format in case it gives problems. Tip2: To make this more efficient, instead of using all your data, you can restrict to a few hundred rows.

Subtask Vector.2 Select 6 pairs of entities (for any of the tested configurations) and discuss the similarity of their vectors (e.g., compare the vectors of the concept pizza:Margherita and the word “pizza”). Try to select 3 pairs for which you expect a close similarity and 3 pairs for which you expect dissimilarity. Discuss the results within the report.

• Subtask Vector.2.1: Use the embeddings from Configuration 1 in Task Vector. 1. (25%).

• Subtask Vector.2.2: Use the embeddings from Configuration 2 in Task Vector. 1. (25%).

Subtask Vector.3 (optional; extra 50%). Solve Subtask OA.1 using similarity among ontology embeddings calculated with OWL2Vec*.

Subtask Vector.4 Correctness and documentation of the codes (10%).